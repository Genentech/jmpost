<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Joint Models for Predicting Overall Survival Trajectories â€¢ jmpost</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Joint Models for Predicting Overall Survival Trajectories">
<meta name="description" content="Implements joint models combining a non-linear mixed effects model for longitudinal measurements with a time-to-event model for the survival outcome. The acronym jmpost stands for Joint Models for Predicting Overall Survival Trajectories, which refers to the application. In phase 1 studies patients are followed until progression only. Thus, reliable overall survival data and hence estimates are not available. However, we can use additional information from previous clinical trials or real-world data - we can correlate the tumour response data, that are longitudinal measurements, with the overall survival of the patients or their hazard ratios. Thereby we can predict the overall survival from our phase 1 study data and therefore make better decisions.">
<meta property="og:description" content="Implements joint models combining a non-linear mixed effects model for longitudinal measurements with a time-to-event model for the survival outcome. The acronym jmpost stands for Joint Models for Predicting Overall Survival Trajectories, which refers to the application. In phase 1 studies patients are followed until progression only. Thus, reliable overall survival data and hence estimates are not available. However, we can use additional information from previous clinical trials or real-world data - we can correlate the tumour response data, that are longitudinal measurements, with the overall survival of the patients or their hazard ratios. Thereby we can predict the overall survival from our phase 1 study data and therefore make better decisions.">
<meta property="og:image" content="https://genentech.github.io/jmpost/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">jmpost</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/custom-model.html">Fitting a Custom Longitudinal Model</a></li>
    <li><a class="dropdown-item" href="articles/extending-jmpost.html">Extending jmpost</a></li>
    <li><a class="dropdown-item" href="articles/model_fitting.html">Model Fitting</a></li>
    <li><a class="dropdown-item" href="articles/statistical-specification.html">Statistical Specifications</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports">
<li><a class="dropdown-item" href="coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="unit-test-report/">Unit test report</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/genentech/jmpost/"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="jmpost-">jmpost 
<a class="anchor" aria-label="anchor" href="#jmpost-"></a>
</h1>
</div>
<!-- badges: start -->

<p>The goal of the <code>jmpost</code> package is to fit joint models involving:</p>
<ol style="list-style-type: decimal">
<li>a parametric time-to-event sub-model,</li>
<li>a nonlinear (or linear) mixed-effect sub-model, describing individual time profiles (<em>i.e.</em> trajectories) for a continuous marker,</li>
<li>a link function (<em>a.k.a.</em> association term).</li>
</ol>
<p>More specifically, the model implemented in this package utilizes a modelling framework described previously <strong>[1-3]</strong> to link overall survival to tumour size data in oncology clinical trials.</p>
<p><strong>[1]</strong> <a href="https://doi.org/10.1002/cpt.1450" class="external-link">Tardivon <em>et al.</em> Association between tumour size kinetics and survival in patients with urothelial carcinoma treated with atezolizumab: Implications for patient follow-up. <em>Clin Pharm Ther</em>, 2019</a>.<br><strong>[2]</strong> <a href="https://doi.org/10.1002/sim.8756" class="external-link">Kerioui <em>et al.</em> Bayesian inference using Hamiltonian Monte-Carlo algorithm for nonlinear joint modelling in the context of cancer immunotherapy. <em>Stat in Med</em>, 2020</a>.<br><strong>[3]</strong> <a href="https://doi.org/10.1111/bcp.15200" class="external-link">Kerioui <em>et al.</em> Modelling the association between biomarkers and clinical outcome: An introduction to nonlinear joint models. <em>Br J Clin Pharm</em>, 2022</a>.</p>
<p>The models are implemented in <a href="https://mc-stan.org/" class="external-link">STAN</a>, and the package provides a flexible user interface. Please reach out to us via issues or email (see the <code>DESCRIPTION</code> file) if you have comments or questions or would like to get involved in the ongoing development, thank you!</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><strong>GitHub</strong></p>
<p>You can install the current development version from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"genentech/jmpost"</span><span class="op">)</span></span></code></pre></div>
<p>Please note that this package requires <a href="https://mc-stan.org/cmdstanr/" class="external-link"><code>cmdstanr</code></a>.</p>
<p><strong>CRAN</strong></p>
<p>This package has not been published to CRAN yet.</p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>See also the <a href="https://genentech.github.io/jmpost/main/articles/model_fitting.html">model fitting</a> vignette for more details. Here we present a very basic example here.</p>
<p>First we simulate a data set. In practice you want to follow a similar structure of the input data and use <code><a href="reference/DataJoint-class.html">DataJoint()</a></code> to bring it into the right format.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://genentech.github.io/jmpost/">jmpost</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Registered S3 methods overwritten by 'ggpp':</span></span>
<span><span class="co">#&gt;   method                  from   </span></span>
<span><span class="co">#&gt;   heightDetails.titleGrob ggplot2</span></span>
<span><span class="co">#&gt;   widthDetails.titleGrob  ggplot2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">321</span><span class="op">)</span></span>
<span><span class="va">sim_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/SimJointData-class.html">SimJointData</a></span><span class="op">(</span></span>
<span>    design <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="reference/SimGroup-class.html">SimGroup</a></span><span class="op">(</span><span class="fl">50</span>, <span class="st">"Arm-A"</span>, <span class="st">"Study-X"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="reference/SimGroup-class.html">SimGroup</a></span><span class="op">(</span><span class="fl">50</span>, <span class="st">"Arm-B"</span>, <span class="st">"Study-X"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    longitudinal <span class="op">=</span> <span class="fu"><a href="reference/SimLongitudinalRandomSlope-class.html">SimLongitudinalRandomSlope</a></span><span class="op">(</span></span>
<span>        times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">150</span>, <span class="fl">200</span>, <span class="fl">250</span>, <span class="fl">300</span><span class="op">)</span>,</span>
<span>    <span class="op">)</span>,</span>
<span>    survival <span class="op">=</span> <span class="fu"><a href="reference/SimSurvivalWeibullPH.html">SimSurvivalWeibullPH</a></span><span class="op">(</span></span>
<span>        lambda <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">300</span>,</span>
<span>        gamma <span class="op">=</span> <span class="fl">0.97</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; INFO: 1 subject(s) did not die before max(times)</span></span>
<span></span>
<span><span class="va">joint_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/DataJoint-class.html">DataJoint</a></span><span class="op">(</span></span>
<span>    subject <span class="op">=</span> <span class="fu"><a href="reference/DataSubject-class.html">DataSubject</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="va">sim_data</span><span class="op">@</span><span class="va">survival</span>,</span>
<span>        subject <span class="op">=</span> <span class="st">"subject"</span>,</span>
<span>        arm <span class="op">=</span> <span class="st">"arm"</span>,</span>
<span>        study <span class="op">=</span> <span class="st">"study"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    survival <span class="op">=</span> <span class="fu"><a href="reference/DataSurvival-class.html">DataSurvival</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="va">sim_data</span><span class="op">@</span><span class="va">survival</span>,</span>
<span>        formula <span class="op">=</span> <span class="fu"><a href="reference/Surv.html">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">event</span><span class="op">)</span> <span class="op">~</span> <span class="va">cov_cat</span> <span class="op">+</span> <span class="va">cov_cont</span></span>
<span>    <span class="op">)</span>,</span>
<span>    longitudinal <span class="op">=</span> <span class="fu"><a href="reference/DataLongitudinal-class.html">DataLongitudinal</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="va">sim_data</span><span class="op">@</span><span class="va">longitudinal</span>,</span>
<span>        formula <span class="op">=</span> <span class="va">sld</span> <span class="op">~</span> <span class="va">time</span>,</span>
<span>        threshold <span class="op">=</span> <span class="fl">5</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Then we specify the joint model, here we use a Generalized Stein-Fojo model for the longitudinal part, and a Weibull proportional hazards model for the survival part. The longitudinal model impacts the hazard via a term for the derivative and another term for the time-to-growth.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">joint_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/JointModel-class.html">JointModel</a></span><span class="op">(</span></span>
<span>    longitudinal <span class="op">=</span> <span class="fu"><a href="reference/LongitudinalGSF-class.html">LongitudinalGSF</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    survival <span class="op">=</span> <span class="fu"><a href="reference/SurvivalWeibullPH-class.html">SurvivalWeibullPH</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    link <span class="op">=</span> <span class="fu"><a href="reference/Link-class.html">Link</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="reference/standard-link-user.html">linkDSLD</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="reference/standard-link-user.html">linkTTG</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Finally we can sample the parameters via MCMC from the underlying Stan model. Note that in a real application you will choose more warm up and sampling iterations.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mcmc_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sampleStanModel.html">sampleStanModel</a></span><span class="op">(</span></span>
<span>    <span class="va">joint_model</span>,</span>
<span>    data <span class="op">=</span> <span class="va">joint_data</span>,</span>
<span>    iter_sampling <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    iter_warmup <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    chains <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    parallel_chains <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="citing-jmpost">Citing <code>jmpost</code>
<a class="anchor" aria-label="anchor" href="#citing-jmpost"></a>
</h2>
<p>To cite <code>jmpost</code> please see <a href="https://genentech.github.io/jmpost/main/authors.html#citation">here</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Genentech/jmpost/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/Genentech/jmpost/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>Apache License (&gt;= 2)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing jmpost</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Craig Gower-Page <br><small class="roles"> Author, maintainer </small>  </li>
<li>Francois Mercier <br><small class="roles"> Author </small>  </li>
<li>Daniel Sabanes Bove <br><small class="roles"> Author </small>  </li>
<li>Georgios Kazantzidis <br><small class="roles"> Author </small>  </li>
<li>Isaac Gravestock <br><small class="roles"> Author </small>  </li>
<li>Xiaoyan Fang <br><small class="roles"> Author </small>  </li>
<li>F. Hoffmann-La Roche AG <br><small class="roles"> Copyright holder, funder </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#wip" class="external-link"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: Active â€“ The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://raw.githubusercontent.com/genentech/jmpost/_xml_coverage_reports/data/main/coverage.xml" class="external-link"><img src="https://raw.githubusercontent.com/genentech/jmpost/_xml_coverage_reports/data/main/badge.svg" alt="Code Coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Craig Gower-Page, Francois Mercier, Daniel Sabanes Bove, Georgios Kazantzidis, Isaac Gravestock, Xiaoyan Fang, F. Hoffmann-La Roche AG.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
